<!DOCTYPE html>
<html lang=zh>
<head>
    <meta charset="utf-8">
    
    <title>Vows node中的BDD框架 | new Number(10).toString(16) new Number(254).toString(16)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Vows是运行在node环境下的bdd(behavior driven development)测试框架。
Vows能够异步测试代码，并且保证测试执行的合理顺序。
下面是一个Vows的例子
// division-by-zero-test.js

var vows = require(&amp;apos;vows&amp;apos;),
    assert = require(&amp;apos;assert&amp;apos">
<meta property="og:type" content="article">
<meta property="og:title" content="Vows node中的BDD框架">
<meta property="og:url" content="http://yoursite.com/2015/12/03/Vows-node中的bdd框架/index.html">
<meta property="og:site_name" content="new Number(10).toString(16) new Number(254).toString(16)">
<meta property="og:description" content="Vows是运行在node环境下的bdd(behavior driven development)测试框架。
Vows能够异步测试代码，并且保证测试执行的合理顺序。
下面是一个Vows的例子
// division-by-zero-test.js

var vows = require(&amp;apos;vows&amp;apos;),
    assert = require(&amp;apos;assert&amp;apos">
<meta property="og:updated_time" content="2016-06-24T07:02:36.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vows node中的BDD框架">
<meta name="twitter:description" content="Vows是运行在node环境下的bdd(behavior driven development)测试框架。
Vows能够异步测试代码，并且保证测试执行的合理顺序。
下面是一个Vows的例子
// division-by-zero-test.js

var vows = require(&amp;apos;vows&amp;apos;),
    assert = require(&amp;apos;assert&amp;apos">
    

    

    
        <link rel="icon" href="/favicon.png" />
    

    <link rel="stylesheet" href="/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/vendor/fancybox/jquery.fancybox.css">
    
    
    
    

</head>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">new Number(10).toString(16) new Number(254).toString(16)</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/tags">Tags</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/tags">Tags</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">Yan Yu</h2>
            <h3 id="title">FE</h3>
            <span id="location"><i class="fa fa-map-marker"></i>PEK, China</span>
            <a id="follow" target="_blank" href="https://github.com/yanyu0517/">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                14
                <span>文章</span>
            </div>
            <div class="article-info-block">
                33
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/yanyu0517/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.facebook.com/yu.yan.338863" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-Vows-node中的bdd框架" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Vows node中的BDD框架
        </h1>
    

                <div class="article-meta">
                    
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2015/12/03/Vows-node中的bdd框架/">
            <time datetime="2015-12-03T08:42:32.000Z" itemprop="datePublished">2015-12-03</time>
        </a>
    </div>


                    
                    
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/node/">node</a>, <a class="tag-link" href="/tags/测试/">测试</a>
    </div>

                </div>
            </header>
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>Vows是运行在node环境下的bdd(behavior driven development)测试框架。</p>
<p>Vows能够异步测试代码，并且保证测试执行的合理顺序。</p>
<p>下面是一个Vows的例子</p>
<pre><code>// division-by-zero-test.js

var vows = require(&apos;vows&apos;),
    assert = require(&apos;assert&apos;);

// Create a Test Suite
vows.describe(&apos;Division by Zero&apos;).addBatch({
    &apos;when dividing a number by zero&apos;: {
        topic: function () { return 42 / 0 },

           &apos;we get Infinity&apos;: function (topic) {
            assert.equal (topic, Infinity);
        }
    },
    &apos;but when dividing zero by zero&apos;: {
        topic: function () { return 0 / 0 },

        &apos;we get a value which&apos;: {
            &apos;is not a number&apos;: function (topic) {
                assert.isNaN (topic);
            },
            &apos;is not equal to itself&apos;: function (topic) {
                assert.notEqual (topic, topic);
            }
        }
    }
}).run(); // Run it
</code></pre><p>运行</p>
<pre><code>$ node division-by-zero-test.js
</code></pre><p>接下来看一个更复杂的例子</p>
<p>首先假设我们有一个模块叫做<code>the-good-things</code></p>
<pre><code>exports.Strawberry = function () {
    this.color = &apos;#ff0000&apos;;
};
exports.Strawberry.prototype = {
    isTasty: function () { return true }
};

exports.Banana = function () {
    this.color = &apos;#fff333&apos;;
};
exports.Banana.prototype = {
    peel: function (callback) {
        process.nextTick(function () {
            callback(null, new(exports.PeeledBanana));
        });
    },
    peelSync: function () { return new(exports.PeeledBanana) }
};

exports.PeeledBanana = function () {};
</code></pre><p>Vows测试代码：</p>
<pre><code>var vows = require(&apos;vows&apos;),
    assert = require(&apos;assert&apos;);

var theGoodThings = require(&apos;./the-good-things&apos;);

var Strawberry   = theGoodThings.Strawberry,
    Banana       = theGoodThings.Banana,
    PeeledBanana = theGoodThings.PeeledBanana;

vows.describe(&apos;The Good Things&apos;).addBatch({
    &apos;A strawberry&apos;: {
        topic: new(Strawberry),

        &apos;is red&apos;: function (strawberry) {
            assert.equal (strawberry.color, &apos;#ff0000&apos;);
        },
        &apos;and tasty&apos;: function (strawberry) {
            assert.isTrue (strawberry.isTasty());
        }
    },
    &apos;A banana&apos;: {
        topic: new(Banana),

        &apos;when peeled *synchronously*&apos;: {
            topic: function (banana) {
                return banana.peelSync();
            },
            &apos;returns a `PeeledBanana`&apos;: function (result) {
                assert.instanceOf (result, PeeledBanana);
            }
        },
        &apos;when peeled *asynchronously*&apos;: {
            topic: function (banana) {
                banana.peel(this.callback);
            },
            &apos;results in a `PeeledBanana`&apos;: function (err, result) {
                assert.instanceOf (result, PeeledBanana);
            }
        }
    }
}).export(module); // Export the Suite
</code></pre><p>运行</p>
<pre><code>$ vows the-good-things-test.js
</code></pre><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><pre><code>$ npm install vows
</code></pre><h1 id="概念介绍"><a href="#概念介绍" class="headerlink" title="概念介绍"></a>概念介绍</h1><p>为了更好的理解Vows，我们首先对Vows测试中的一些概念进行了解</p>
<h2 id="Test-Suite"><a href="#Test-Suite" class="headerlink" title="Test Suite"></a>Test Suite</h2><p>test suite是Vows中最大的测试单元，按照惯例，每一个文件应该对应应该有一个test suite。test suite是由vows.describe产生的</p>
<pre><code>var suite = vows.describe(&apos;subject&apos;)
</code></pre><p>其中describe的名字是由文件夹名字决定的</p>
<p>通过<code>addBatch</code>方法，测试用例会被加入到test suite中</p>
<pre><code>suite.addBatch({});
</code></pre><p>test suite同样支持链式调用，addBatch方法通过链式调用，来实现顺序执行</p>
<pre><code>suite.addBatch({/* run 1st */}).addBatch({/* 2nd */}).addBatch({/* 3rd */});
</code></pre><p>Batches中包含了contexts，用来描述测试用例</p>
<pre><code>suite.addBatch({
       &apos;A context&apos;: {},
       &apos;Another context&apos;: {}
});
</code></pre><p>每一个Batch中的context是完全异步的，无法保证哪个context最先执行完</p>
<p>Contexts中包含了topics和vows，组合在一起构成了测试用例行为</p>
<pre><code>suite.addBatch({
    &apos;A context&apos;: {
        topic: function () {/* Do something async */},
        &apos;I am a vow&apos;: function (topic) {
            /* Test the result of the topic */
        }
    },
    &apos;Another context&apos;: {}
});
</code></pre><p>并且contexts中还可以包含子contexts</p>
<p>子contexts会在其父contexts执行结束后开始执行</p>
<p><strong>总结</strong></p>
<p>Test Suite 是一个对象，包含了零个或者多个batches<br>batch是一个字面量对象，是context的容器<br>context是一个对象，包含一个可选的topic，零个或者多个vows，以及零个或者多个子context<br>topic可以是值，也可以是方法，执行异步测试代码<br>vow是一个方法，以参数的方式接收topic，并对其执行断言</p>
<pre><code>Suite   → Batch*
Batch   → Context*
Context → Topic? Vow* Context*
</code></pre><p>可以通过下面代码  来形象的了解上述概念</p>
<pre><code>vows.describe(&apos;Array&apos;).addBatch({  // Batch
    &apos;An array&apos;: {                                      // Context
        &apos;with 3 elements&apos;: {                           // Sub-Context
            topic: [1, 2, 3],                          // Topic

            &apos;has a length of 3&apos;: function (topic) {    // Vow
                assert.equal(topic.length, 3);
            }
        },
        &apos;with zero elements&apos;: {                        // Sub-Context
            topic: [],                                 // Topic

            &apos;has a length of 0&apos;: function (topic) {    // Vow
                assert.equal(topic.length, 0);
            },
            &apos;returns *undefined*, when `pop()`ed&apos;: function (topic) {
                assert.isUndefined(topic.pop());
            }
        }
    }
});
</code></pre><h2 id="Topics"><a href="#Topics" class="headerlink" title="Topics"></a>Topics</h2><p>在vows中，测试对象，topic，测试行为是被分离的</p>
<pre><code>{ topic: 42,
    &apos;should be equal to 42&apos;: function (topic) {
        assert.equal (topic, 42);
    }
}
</code></pre><p>在上例中，topic是被单独分离出来，作为参数，传递给vow，在vow通过断言判断topic和预期值</p>
<p>接下来，我们看一下如果topic是方法的话，会如何</p>
<pre><code>{ 
    topic: function () { return 42 },
    &apos;should be equal to 42&apos;: function (topic) {
           assert.equal (topic, 42);
    }
}
</code></pre><p>与topic直接等于42是一样的</p>
<p>一个topic对应两个vow方法</p>
<pre><code>{ 
    topic: function () { return 42 },
    &apos;should be a number&apos;: function (topic) {
        assert.isNumber (topic);
    },
    &apos;should be equal to 42&apos;: function (topic) {
        assert.equal (topic, 42);
    }
}
</code></pre><p><strong>topic的作用域</strong></p>
<p>有可能在子topic中会需要父topic的值</p>
<pre><code>{ 
    topic: new(DataStore),
    &apos;should respond to `get()` and `put()`&apos;: function (store) {
        assert.isFunction (store.get);
        assert.isFunction (store.put);
    },
    &apos;calling `get(42)`&apos;: {
        topic: function (store) { return store.get(42) },
        &apos;should return the object with id 42&apos;: function (topic) {
              assert.equal (topic.id, 42);
        }
    }
}
</code></pre><p>在上面的例子中, <code>&#39;calling get(42)&#39;</code> context的topic，通过方法的参数<code>store</code>，得到了父topic，<code>new(DataStore)</code>，</p>
<p>并且vow支持多层topic嵌套，都可以通过子topic方法的参数获得</p>
<pre><code>topic: function (a, /* Parent topic                     */
                 b, /* Parent of parent topic           */
                  c  /* Parent of parent of parent topic */) {}
</code></pre><p>通过参数的排列顺序，可以区分父topic的层级，最近的父topic，作为第一个参数</p>
<h2 id="运行Test-suite"><a href="#运行Test-suite" class="headerlink" title="运行Test suite"></a>运行Test suite</h2><p>通过run方法，运行test suite</p>
<pre><code>vows.describe(&apos;subject&apos;).addBatch({/* ... */}).run();
</code></pre><p>run方法有一个可选参数，<code>callback</code>，运行结束后的回调函数，并在<code>callback</code>的参数中会得到运行结果</p>
<pre><code>{ 
    honored: 145,
    broken:    4,
    errored:   1,
    pending:   0,
    total:   150,
    time:  5.491
};
</code></pre><p>node中运行subject-test.js</p>
<pre><code>$ node subject-test.js
</code></pre><p>结果会被console到控制台</p>
<p><strong>Export test suite</strong></p>
<p>通过export，能够整合多个test suite</p>
<p>当需要export时，仅需要用export来替代run方法，并把test suite export到module</p>
<p>在node环境中，module是全局的</p>
<pre><code>// subject-test.js

vows.describe(&apos;subject&apos;).addBatch({/* ... */}).export(module);
</code></pre><p>vows命令运行test uite</p>
<pre><code>$ vows subject-test.js
</code></pre><p>这种方法与上面node中运行subject-test.js是一样的</p>
<p>vows命令还支持批量执行test suite</p>
<pre><code>$ vows test/*
</code></pre><p>将会执行test文件夹下的所有test suite</p>
<p>vows命令还支持参数输入，如传入–spec标志位</p>
<p>export还有另外一种方式，可以把vow对象直接传递给exports对象</p>
<pre><code>exports.suite1 = vows.describe(&apos;suite one&apos;);
exports.suite2 = vows.describe(&apos;suite two&apos;);
</code></pre><p>整理一下上面所讲，一个完整的vows测试如下</p>
<pre><code>// subject-test.js
// A test suite, describing &apos;subject&apos;

vows.describe(&apos;subject&apos;) // Create the suite, describing &apos;subject&apos;
    .addBatch({})        // Add the 1st batch
    .addBatch({})        // Add a 2nd batch
    .addBatch({})        // Add a 3rd batch
    .export(module);     // Export it
</code></pre><p>运行</p>
<pre><code>vows subject-test.js --spec
</code></pre><h2 id="异步测试"><a href="#异步测试" class="headerlink" title="异步测试"></a>异步测试</h2><p>假设，如果我们想测试一个文件是否存在，并且这个文件需要符合某一些标准</p>
<p>因为是异步读取文件，无法在topic中直接return文件信息，那么在vow方法中，也就拿不到正确的文件信息，无法执行测试。</p>
<p>关键就在于，如何等待topic中的异步结束，并把结果传给vow方法</p>
<pre><code>{ 
    topic: function () {
        fs.stat(&apos;~/FILE&apos;, this.callback);
    },
    &apos;can be accessed&apos;: function (err, stat) {
        assert.isNull   (err);        // We have no error
        assert.isObject (stat);       // We have a stat object
    },
    &apos;is not empty&apos;: function (err, stat) {
        assert.isNotZero (stat.size); // The file size is &gt; 0
    }
}
</code></pre><p>上面的例子中，关键是<code>this.callback</code>，<code>this.callback</code>在fs.stat执行完毕后被调用，并且<code>this.callback</code>的参数与vow是一一对应的。通过<code>this.callback</code>，就可以使我们把回调函数从异步方法中分离出来</p>
<p>需要注意的是，如果在topic中调用了<code>this.callback</code>，那么topic不要return任何东西。</p>
<p>同样的，如果topic没有return任何东西，那么一定要调用<code>this.callback</code></p>
<p><strong>事件触发器</strong></p>
<p>Vows同样支持事件触发器，可以在topic中返回一个事件触发器实例，那么vow方法将会被执行，当事件触发器触发<code>error</code>或者<code>success</code></p>
<pre><code>{ 
    topic: function () {
        var emitter = new(events.EventEmitter);

        fs.stat(&apos;~/FILE&apos;, function (e, res) {
            if (e) { emitter.emit(&apos;error&apos;, e) }
            else   { emitter.emit(&apos;success&apos;, res) }
        });
        return emitter;
    },
    &apos;can be accessed&apos;: function (err, stat) {
        assert.isNull   (err);        // We have no error
        assert.isObject (stat);       // We have a stat object
    },
    &apos;is not empty&apos;: function (err, stat) {
        assert.isNotZero (stat.size); // The file size is &gt; 0
    }
}
</code></pre><p>如上述中，topic中并没有调用<code>this.callback</code>，而是返回了一个事件触发器的实例<code>emitter</code>。</p>
<p>在fs.stat的callback中，根据返回结果，<code>emitter</code>触发<code>error</code>或者<code>success</code></p>
<p><strong>执行顺序</strong></p>
<p>当多个context嵌套的时候，异步测试的执行顺序如何呢</p>
<pre><code>{ 
    topic: function () {
        fs.stat(&apos;~/FILE&apos;, this.callback);
    },
    &apos;after a successful `fs.stat`&apos;: {
        topic: function (stat) {
              fs.open(&apos;~/FILE&apos;, &quot;r&quot;, stat.mode, this.callback);
        },
        &apos;after a successful `fs.open`&apos;: {
              topic: function (fd, stat) {
                fs.read(fd, stat.size, 0, &quot;utf8&quot;, this.callback);
              },
              &apos;we can `fs.read` to get the file contents&apos;: function (data) {
                   assert.isString (data);
              }
        }
    }
}
</code></pre><p>上面例子中，是三层context嵌套，有三个topic，这三个topic执行的都是异步方法，并在最深层次的context的vow方法做断言判断。</p>
<p>最外层topic，是读取文件信息，中间层topic打开文件，最深层topic读取文件数据</p>
<p>执行顺序也是最外层topic-&gt;中间层topic-&gt;最深层topic-&gt;最深层vow方法执行断言</p>
<p>并且topic结果，也是从父topic一层一层传给子topic</p>
<p>下面这个例子，是异步测试一些设备</p>
<pre><code>{ 
    &apos;/dev/stdout&apos;: {
        topic:    function () { path.exists(&apos;/dev/stdout&apos;, this.callback) },
        &apos;exists&apos;: function (result) { assert.isTrue(result) }
},
    &apos;/dev/tty&apos;: {
        topic:    function () { path.exists(&apos;/dev/tty&apos;, this.callback) },
        &apos;exists&apos;: function (result) { assert.isTrue(result) }
},
    &apos;/dev/null&apos;: {
        topic:    function () { path.exists(&apos;/dev/null&apos;, this.callback) },
        &apos;exists&apos;: function (result) { assert.isTrue(result) }
    }
}
</code></pre><p>上面是多个同级context，异步执行。Vows并不能保证这写context的执行顺序，只会在最后一个I/O操作结束，并执行完<code>assert</code>后退出。</p>
<p>也就是说，对于多层context嵌套，因为有父子关系，Vows会保证context的执行顺序，是从父到子，即使是异步方法</p>
<p>而如果是多个平级context执行，那么Vows无法保证顺序</p>
<h2 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h2><p>Vows的断言是继承自node的assertion，并对错误报告功能作为更好的改进</p>
<p>推荐使用更能表明测试语义的断言方法，这样能得到更明确的测试结果。</p>
<p>比如下面判断数组的长度</p>
<p>使用<code>assert.equal</code>方法判断数组长度</p>
<pre><code>var ary = [1, 2, 3];
assert.equal(ary.length, 5);
</code></pre><p>测试结果如下</p>
<pre><code>expected 5, got 3
</code></pre><p>我们还可以使用<code>assert.lengthOf</code>方法判断数组长度</p>
<pre><code>var ary = [1, 2, 3];
assert.lengthOf(ary, 5);
</code></pre><p>测试结果如下</p>
<pre><code>expected [1, 2, 3] to have 5 elements
</code></pre><p>使用<code>assert.lengthOf</code>方法的测试结果，更加明确</p>
<p>Vows的常用断言方法：<code>assert.match</code>, <code>assert.instanceOf</code>, <code>assert.include</code> 和 <code>assert.isEmpty</code></p>
<p>完整的Vows断言方法，<a href="http://vowsjs.org/#reference" target="_blank" rel="external">http://vowsjs.org/#reference</a></p>
<h2 id="宏"><a href="#宏" class="headerlink" title="宏"></a>宏</h2><p>当我们需要复用topic和vow方法时，我们可以把topic和vow抽象出来</p>
<p>比如，当需要测试http status code，最开始的写法</p>
<pre><code>{ 
    topic: function () {
        client.get(&apos;/resources/42&apos;, this.callback);
    },
    &apos;should respond with a 200 OK&apos;: function (e, res) {
        assert.equal (res.status, 200);
    }
}
</code></pre><p>当我们需要测试很多种http status code的时候，我们可以把vow方法抽象出来</p>
<pre><code>function assetStatus(code){
    return function(e, res){
        assert.equal(res.status, code);
    }
}
</code></pre><p>test suite改写成</p>
<pre><code>{ 
    topic: function () {
        client.get(&apos;/resources/42&apos;, this.callback);
    },
    &apos;should respond with a 200 OK&apos;: assetStatus(200)
}
</code></pre><p>我们已经把vow抽象出来了，是不是可以继续把topic抽象出来？</p>
<pre><code>var api = {
    get: function (path) {
        return function () {
            client.get(path, this.callback);
        };
    }
};
</code></pre><p>test suite再次改写成</p>
<pre><code>{
    topic: api.get(&apos;/resources/42&apos;),
    &apos;should respond with a 200 OK&apos;: assetStatus(200)
}
</code></pre><p>经过上面的改造，我们就可以批量测试多个http地址和多个http status code</p>
<pre><code>{   
    &apos;GET /&apos;: {
        topic: api.get(&apos;/&apos;),
        &apos;should respond with a 200 OK&apos;: assertStatus(200)
    },
    &apos;POST /&apos;: {
        topic: api.post(&apos;/&apos;),
        &apos;should respond with a 405 Method not allowed&apos;: assertStatus(405)
    },
    &apos;GET /resources (no api-key)&apos;: {
        topic: api.get(&apos;/resources&apos;),
        &apos;should respond with a 403 Forbidden&apos;: assertStatus(403)
    },
    &apos;GET /resources?apikey=af816e859c249fe&apos;: {
        topic: api.get(&apos;/resources?apikey=af816e859c249fe&apos;),
        &apos;should return a 200 OK&apos;: assertStatus(200),
        &apos;should return a list of resources&apos;: function (res) {
            assert.isArray (res.body);
        }
    }
}
</code></pre><p>上面的例子中，topic和vow分别有api.get和assertStatus两个方法生成的，接下来，我们试着整合topic和vow在一个方法</p>
<pre><code>//
// Send a request and check the response status.
//
function respondsWith(status) {
    var context = {
        topic: function () {
            // Get the current context&apos;s name, such as &quot;POST /&quot;
            // and split it at the space.
            var req    = this.context.name.split(/ +/), // [&quot;POST&quot;, &quot;/&quot;]
                method = req[0].toLowerCase(),          // &quot;post&quot;
                path   = req[1];                        // &quot;/&quot;

            // Perform the contextual client request,
            // with the above method and path.
            client[method](path, this.callback);
        }
    };
    // Create and assign the vow to the context.
    // The description is generated from the expected status code
    // and status name, from node&apos;s http module.
    context[&apos;should respond with a &apos; + status + &apos; &apos;
           + http.STATUS_CODES[status]] = assertStatus(status);

    return context;
}
</code></pre><p>上面的例子中，respondsWith方法，用来生成一个context</p>
<p>在context中，topic，是根据<code>this.context</code>（这是因为之前我们说过context是一个字面量对象）来决定如何调用的。</p>
<p>而vow则通过<code>context[&#39;should respond with a &#39; + status + &#39; &#39;  + http.STATUS_CODES[status]] = assertStatus(status);</code>设置</p>
<p>最后<code>return context</code></p>
<p>test suite：</p>
<pre><code>{ 
    &apos;GET  /&apos;:                   respondsWith(200),
    &apos;POST /&apos;:                   respondsWith(405),
    &apos;GET  /resources (no key)&apos;: respondsWith(403)
}
</code></pre><p>测试结果：</p>
<pre><code>GET  /
    ✓ should respond with a 200 OK
POST /
    ✓ should respond with a 405 Method Not Allowed
GET  /resources (no key)
    ✓ should respond with a 403 Forbidden
</code></pre><h2 id="teardown"><a href="#teardown" class="headerlink" title="teardown"></a>teardown</h2><p>在vows的官方文档中，并没有关于如果batch或者context执行完毕后，如何通知调用者。</p>
<p>这就意味着，如果我在测试代码中，打开了一个数据库连接或者http server，那么在测试结束后，我无法断开数据库连接，或者关闭http server。</p>
<p>这样node的process就不会退出。</p>
<p>process如果process不退出将会很麻烦，如：</p>
<ul>
<li>集成到ci，那么如果process不退出，ci的build是不会结束的，这样就会永远得不到build结果。</li>
<li>与istanbul这种代码覆盖率测试框架集成，代码覆盖率报告要等到process退出后才能汇总得到，所以如果process不退出的话，是一直得不到代码覆盖率报告的</li>
</ul>
<p>這对于一个专注于异步测试的框架，是很不应该的。</p>
<p>在耗费了一天的时候阅读源代码和翻阅issue后，发现了teardown这个回调函数。</p>
<p>teardown会在batch和context执行完毕后，被触发。所以我们可以把需要在测试结束后的操作，在batch或者context的teardown中实现</p>
<p>batch和context实现teardown</p>
<pre><code>vows.describe(&apos;Array&apos;).addBatch({  // Batch
    &apos;An array&apos;: {                                      // Context
        &apos;with 3 elements&apos;: {                           // Sub-Context
            topic: [1, 2, 3],                          // Topic

            &apos;has a length of 3&apos;: function (topic) {    // Vow
                assert.equal(topic.length, 3);
            },
            teardown: function(){
                //将会被触发，当&apos;with 3 elements&apos; context结束
            }
        },
        &apos;with zero elements&apos;: {                        // Sub-Context
            topic: [],                                 // Topic

            &apos;has a length of 0&apos;: function (topic) {    // Vow
                assert.equal(topic.length, 0);
            },
            &apos;returns *undefined*, when `pop()`ed&apos;: function (topic) {
                assert.isUndefined(topic.pop());
            }
        },
        teardown: function(){
            //将会被触发，当&apos;An array&apos; context结束
        }
    },
    teardown: function(){
        //会被触发，当Batch结束
    }
});
</code></pre><h1 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h1><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><pre><code>vows [FILE, ...] [options]
</code></pre><p>运行指定test suite</p>
<pre><code>$ vows test-1.js test-2.js
$ vows tests/*
</code></pre><p>运行所有test suite</p>
<pre><code>$ vows
</code></pre><p>查看模式</p>
<pre><code>$ vows -w
$ vows --watch
</code></pre><h2 id="运行参数"><a href="#运行参数" class="headerlink" title="运行参数"></a>运行参数</h2><pre><code>-v, --verbose    Verbose mode
-w, --watch    Watch mode
-m STRING    String matching: Only run tests with STRING in their title
-r REGEXP    Regexp matching: Only run tests with REGEXP in their title
--json    Use JSON reporter
--spec    Use Spec reporter
--dot-matrix    Use Dot-Matrix reporter
--version    Show version
-s, --silent    Don&apos;t report
--help    Show help
</code></pre><h2 id="断言方法"><a href="#断言方法" class="headerlink" title="断言方法"></a>断言方法</h2><p><strong>equality</strong></p>
<pre><code>assert.equal          (4, 4);
assert.strictEqual    (4 &gt; 2, true);

assert.notEqual       (4, 2);
assert.notStrictEqual (1, true);

assert.deepEqual      ([4, 2], [4, 2]);
assert.notDeepEqual   ([4, 2], [2, 4]);

assert.epsilon        (1e-5, 0.1 + 0.2, 0.3);
</code></pre><p><strong>type</strong></p>
<pre><code>assert.isFunction (function () {});
assert.isObject   ({goo:true});
assert.isString   (&apos;goo&apos;);
assert.isArray    ([4, 2]);
assert.isNumber   (42);
assert.isBoolean  (true);

assert.typeOf     (42, &apos;number&apos;);
assert.instanceOf ([], Array);
</code></pre><p><strong>truth</strong></p>
<pre><code>assert.isTrue  (true);
assert.isFalse (false);
</code></pre><p><strong>null, undefined, NaN</strong></p>
<pre><code>assert.isNull      (null);
assert.isNotNull   (undefined);

assert.isUndefined (&apos;goo&apos;[9]);
assert.isNaN       (0/0);
</code></pre><p><strong>inclusion</strong></p>
<pre><code>assert.include ([4, 2, 0], 2);
assert.include ({goo:true}, &apos;goo&apos;);
assert.include (&apos;goo&apos;, &apos;o&apos;);
</code></pre><p><strong>regexp matching</strong></p>
<pre><code>assert.match (&apos;hello&apos;, /^[a-z]+/);
</code></pre><p><strong>length</strong></p>
<pre><code>assert.lengthOf ([4, 2, 0], 3);
assert.lengthOf (&apos;goo&apos;, 3);
</code></pre><p><strong>emptiness</strong></p>
<pre><code>assert.isEmpty ([]);
assert.isEmpty ({});
assert.isEmpty (&quot;&quot;);
</code></pre><p><strong>exceptions</strong></p>
<pre><code>assert.throws(function () { x + x }, ReferenceError);
assert.doesNotThrow(function () { 1 + 1 }, Error);
</code></pre>
        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="http://yoursite.com/2015/12/03/Vows-node中的bdd框架/" data-id="ciyxv7p6r001szbfykeghk6g8" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="http://yoursite.com/2015/12/03/Vows-node中的bdd框架/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://yoursite.com/2015/12/03/Vows-node中的bdd框架/">评论</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2015/12/11/vows-istanbul-coveralls-整合/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    vows istanbul coveralls 整合
                
            </div>
        </a>
    
    
        <a href="/2015/11/09/前端奇技淫巧-持续更新中/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">前端奇技淫巧(持续更新中)</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/02/09/ES7和ES8特性/" class="thumbnail">
    
    
        <span style="background-image:url(https://ww1.sinaimg.cn/large/006tNc79ly1fcgu138drlj30qo0f5mzg.jpg)" alt="ES7和ES8特性.md" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/02/09/ES7和ES8特性/" class="title">ES7和ES8特性.md</a></p>
                            <p class="item-date"><time datetime="2017-02-09T04:07:19.000Z" itemprop="datePublished">2017-02-09</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/12/07/JavaScript-2016-调查-—-状态管理工具/" class="thumbnail">
    
    
        <span style="background-image:url(/images/small.png)" alt="JavaScript 2016 调查 — 状态管理工具" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/12/07/JavaScript-2016-调查-—-状态管理工具/" class="title">JavaScript 2016 调查 — 状态管理工具</a></p>
                            <p class="item-date"><time datetime="2016-12-07T10:30:24.000Z" itemprop="datePublished">2016-12-07</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/12/06/JavaScript-2016-调查-—-前端框架/" class="thumbnail">
    
    
        <span style="background-image:url(/images/frall.png)" alt="JavaScript 2016 调查 — 前端框架" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/12/06/JavaScript-2016-调查-—-前端框架/" class="title">JavaScript 2016 调查 — 前端框架</a></p>
                            <p class="item-date"><time datetime="2016-12-06T11:33:11.000Z" itemprop="datePublished">2016-12-06</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/12/02/JavaScript-2016-调查-—-JavaScript语言规范/" class="thumbnail">
    
    
        <span style="background-image:url(/images/all.png)" alt="JavaScript 2016 调查 — JavaScript语言规范" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/12/02/JavaScript-2016-调查-—-JavaScript语言规范/" class="title">JavaScript 2016 调查 — JavaScript语言规范</a></p>
                            <p class="item-date"><time datetime="2016-12-02T08:19:10.000Z" itemprop="datePublished">2016-12-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2016/12/02/JavaScript-2016-调查-——-介绍/" class="thumbnail">
    
    
        <span style="background-image:url(/images/javascript9.svg)" alt="JavaScript 2016 调查 — 介绍" class="thumbnail-image"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2016/12/02/JavaScript-2016-调查-——-介绍/" class="title">JavaScript 2016 调查 — 介绍</a></p>
                            <p class="item-date"><time datetime="2016-12-02T07:27:03.000Z" itemprop="datePublished">2016-12-02</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular/">Angular</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular2/">Angular2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ES6/">ES6</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/">Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IE浏览器/">IE浏览器</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript-2016/">JavaScript 2016</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/">TypeScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/">Vue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue2/">Vue2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/badge/">badge</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coverage/">coverage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/coveralls/">coveralls</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es8/">es8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitflow/">gitflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/">github</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github-flow/">github flow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/istanbul/">istanbul</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/">test</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vows/">vows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/兼容性/">兼容性</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端框架/">前端框架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/包管理工具/">包管理工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工作实践/">工作实践</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/测试/">测试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语言规范/">语言规范</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/－javascript-node-es6/">－javascript - node - es6</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Angular/" style="font-size: 10px;">Angular</a> <a href="/tags/Angular2/" style="font-size: 10px;">Angular2</a> <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/Github/" style="font-size: 10px;">Github</a> <a href="/tags/IE浏览器/" style="font-size: 10px;">IE浏览器</a> <a href="/tags/JavaScript-2016/" style="font-size: 20px;">JavaScript 2016</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Vue2/" style="font-size: 10px;">Vue2</a> <a href="/tags/badge/" style="font-size: 10px;">badge</a> <a href="/tags/coverage/" style="font-size: 10px;">coverage</a> <a href="/tags/coveralls/" style="font-size: 10px;">coveralls</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/es7/" style="font-size: 10px;">es7</a> <a href="/tags/es8/" style="font-size: 10px;">es8</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gitflow/" style="font-size: 10px;">gitflow</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/github-flow/" style="font-size: 10px;">github flow</a> <a href="/tags/gitlab/" style="font-size: 10px;">gitlab</a> <a href="/tags/istanbul/" style="font-size: 10px;">istanbul</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/test/" style="font-size: 10px;">test</a> <a href="/tags/vows/" style="font-size: 10px;">vows</a> <a href="/tags/兼容性/" style="font-size: 10px;">兼容性</a> <a href="/tags/前端框架/" style="font-size: 10px;">前端框架</a> <a href="/tags/包管理工具/" style="font-size: 10px;">包管理工具</a> <a href="/tags/工作实践/" style="font-size: 10px;">工作实践</a> <a href="/tags/测试/" style="font-size: 10px;">测试</a> <a href="/tags/语言规范/" style="font-size: 10px;">语言规范</a> <a href="/tags/－javascript-node-es6/" style="font-size: 10px;">－javascript - node - es6</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 Yan Yu<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'http://yoursite.com/2015/12/03/Vows-node中的bdd框架/';
        
        this.page.identifier = 'Vows-node中的bdd框架';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'hexo-theme-icarus' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        <script src="/vendor/fancybox/jquery.fancybox.pack.js"></script>
    


<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>